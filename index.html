<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sorry Yashika ðŸ’Œ</title>

  <style>
    :root{--bg:#06060a;--text:#fff}
    *{box-sizing:border-box;margin:0;padding:0}

    body{
      height:100vh;
      background:radial-gradient(circle at 20% 20%,rgba(255,255,255,0.05),transparent),var(--bg);
      font-family:Inter,Arial;
      display:flex;
      justify-content:center;
      align-items:center;
      overflow:hidden;
    }

    /* intro overlay */
    .intro{
      position:fixed;inset:0;
      background:white;
      display:flex;justify-content:center;align-items:center;
      z-index:100;
      transition:opacity .4s;
    }
    .intro-text{
      font-size:28px;font-weight:800;color:#111;
      font-family:Georgia,serif;
    }
    .hidden{opacity:0;pointer-events:none;}

    /* phone container */
    .stage{
      width:420px;max-width:94vw;
      height:820px;border-radius:36px;
      background:linear-gradient(180deg,#07070a,#0e0e12);
      border:6px solid #000;
      box-shadow:0 30px 80px rgba(0,0,0,0.7);
      position:relative;
      overflow:hidden;
    }

    .center{
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      padding:80px 20px;
    }

    .tap-hint{
      position:absolute;
      top:50%;left:50%;
      transform:translate(-50%,-50%);
      font-size:18px;font-weight:700;
      color:rgba(255,255,255,0.9);
      pointer-events:none;
      transition:opacity .3s;
    }

    .env-wrap{
      width:260px;height:160px;
      position:relative;
      perspective:800px;
    }

    /* envelope */
    .envelope{
      width:100%;height:100%;
      background:linear-gradient(180deg,#ffdee7,#ffd9f6);
      border-radius:12px;
      box-shadow:0 10px 30px rgba(0,0,0,0.5);
      position:relative;
      transform-origin:center;
    }

    .flap{
      position:absolute;left:0;right:0;top:0;height:60%;
      background:linear-gradient(180deg,#ffd8ea,#ffebf7);
      clip-path:polygon(0 0,50% 60%,100% 0,100% 100%,0 100%);
      transform-origin:top;
      border-radius:12px 12px 0 0;
      transition:transform .7s cubic-bezier(.2,.9,.2,1);
    }

    .paper{
      position:absolute;left:12px;right:12px;bottom:12px;top:12px;
      background:white;border-radius:8px;
      display:flex;justify-content:center;align-items:center;
      transform:translateY(30%);
      opacity:0;
      transition:.7s ease;
    }

    .paper .msg{
      font-family:Georgia,serif;
      font-size:20px;color:#111;font-weight:700;
      text-align:center;
      padding:10px;
    }

    .env-open .flap{
      transform:rotateX(180deg) translateY(-10px);
    }
    .env-open .paper{
      opacity:1;transform:translateY(-5%);
    }

    .sparkles{
      position:absolute;inset:0;pointer-events:none;overflow:hidden;
    }

    .float{
      position:absolute;width:40px;height:40px;opacity:0;
      will-change:transform,opacity;
    }
    .float svg{width:100%;height:100%}

    /* reveal text */
    .reveal{
      position:absolute;bottom:120px;left:50%;
      transform:translateX(-50%);
      width:90%;max-width:360px;
      text-align:center;
      opacity:0;transition:.6s;
      pointer-events:none;
    }
    .reveal.show{opacity:1;}

    .apology{
      font-family:Georgia,serif;
      font-size:26px;font-weight:700;
    }
    .sub{
      margin-top:8px;font-size:15px;
      color:rgba(255,255,255,0.75);
    }

    .controls{
      position:absolute;bottom:12px;left:12px;right:12px;
      display:flex;justify-content:center;
    }
    .btn{
      padding:10px 16px;background:rgba(255,255,255,0.05);
      border:1px solid rgba(255,255,255,0.2);
      border-radius:20px;color:white;cursor:pointer;
      font-weight:600;
    }
  </style>
</head>

<body>
  <!-- Intro -->
  <div class="intro" id="intro"><div class="intro-text">SORRY YASHIKA ðŸ’Œ</div></div>

  <!-- Main -->
  <div class="stage" id="stage">
    <div class="center">
      <div class="tap-hint" id="hint">Tap to open ðŸ’—</div>

      <div class="env-wrap">
        <div class="envelope" id="env">
          <div class="flap"></div>

          <div class="paper">
            <div class="msg">I know I have hurted youâ€¦ and I truly am sorry from my heart. ðŸ’—</div>
          </div>
        </div>

        <div class="sparkles" id="sparkles"></div>
      </div>
    </div>

    <div class="reveal" id="reveal">
      <div class="apology">I'M SORRY</div>
      <div class="sub">I didn't mean to hurt you. Will you forgive me?</div>
    </div>

    <div class="controls"><button class="btn" id="replay">Replay</button></div>

    <audio id="bgm" preload="auto" loop>
      <source src="assets/song.mp3" type="audio/mpeg">
    </audio>
  </div>

<script>
/* elements */
const intro = document.getElementById("intro");
const stage = document.getElementById("stage");
const reveal = document.getElementById("reveal");
const sparkles = document.getElementById("sparkles");
const hint = document.getElementById("hint");
const bgm = document.getElementById("bgm");

let burstTimer = null;

/* floating hearts + butterflies */
function createFloat(type){
  const el = document.createElement("div");
  el.className = "float";
  el.style.left = (30 + Math.random()*200) + "px";
  el.style.bottom = (20 + Math.random()*20) + "px";

  if(type === "butterfly"){
    el.innerHTML = `
      <svg viewBox="0 0 64 48">
        <path d="M32 24c8-12 24-16 24-8s-12 16-24 24c-12-8-24-16-24-24s16-4 24 8z" fill="#f7a8d1"/>
        <path d="M32 24c-8-12-24-16-24-8s12 16 24 24c12-8 24-16 24-24s-16-4-24 8z" fill="#b8a0ff" opacity="0.9"/>
      </svg>`;
  } else {
    el.innerHTML = `
      <svg viewBox="0 0 24 24">
        <path d="M12 21s-7-4.6-9-7.2C0.9 11.1 3 7 6.5 7 8.6 7 10 8.2 12 10c2-1.8 3.4-3 5.5-3C21 7 23.1 11.1 21 13.8 19 16.4 12 21 12 21z" fill="#ff7ab6"/>
      </svg>`;
  }

  sparkles.appendChild(el);

  const dur = 5000 + Math.random()*3000; // slow gentle float
  el.animate([
    {opacity:0, transform:"translateY(0) scale(0.85)"},
    {opacity:1, transform:"translateY(-200px) scale(1.02)", offset:0.25},
    {opacity:0, transform:"translateY(-420px) scale(1.05)"}
  ], {duration:dur});

  setTimeout(()=> el.remove(), dur+50);
}

function burstForever(){
  createFloat(Math.random() > 0.5 ? "butterfly" : "heart");
  const next = 1200 + Math.random()*2000; // 1.2â€“3.2s
  burstTimer = setTimeout(burstForever, next);
}

/* main sequence */
function playSequence(){
  intro.classList.add("hidden");
  setTimeout(()=> intro.style.display="none", 350);

  stage.classList.add("env-open");
  hint.style.opacity = 0;

  setTimeout(()=> reveal.classList.add("show"), 700);

  bgm.play().catch(()=>{});
  burstForever();
}

/* replay */
document.getElementById("replay").addEventListener("click", ()=>{
  reveal.classList.remove("show");
  stage.classList.remove("env-open");

  sparkles.innerHTML = "";
  if(burstTimer){ clearTimeout(burstTimer); burstTimer=null;}

  bgm.pause();
  bgm.currentTime = 0;

  intro.style.display="flex";
  intro.classList.remove("hidden");
  hint.style.opacity = 1;

  window.addEventListener("click", playSequence, {once:true});
});

/* start on first click */
window.addEventListener("click", playSequence, {once:true});
window.addEventListener("pointerdown", ()=> bgm.play().catch(()=>{}), {once:true});
</script>

</body>
</html>
